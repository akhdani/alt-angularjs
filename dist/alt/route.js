alt.baseUrl="#!/",alt.routeFolder=alt.routeFolder||"route",alt.defaultRoute=alt.defaultRoute||"",alt.modules.route=angular.module("alt-route",["ngRoute"]).config(["$locationProvider","$compileProvider","$routeProvider",function(t,e,l){t.html5Mode(!1),t.hashPrefix("!");var o=/^\s*(https?|ftp|mailto|file|tel|app):|data:image|javascript:|\//;e.urlSanitizationWhitelist&&e.urlSanitizationWhitelist(o),alt.routing=function(){var t={};return{template:'<div id="templateView" data-ng-controller="controller" data-ng-include="view"></div>',controller:null,resolve:{load:["$q","$route","$timeout","$log","$window","$rootScope",function(e,l,o,r,a,n){var i=n.onRouteChanged(l.current.params),u=e.defer(),c=l.current.params,d=angular.element(document.getElementsByTagName("body")[0]).scope(),m=(c.altmodule?c.altmodule+"/":"")+(c.altcontroller?c.altcontroller+"/":"")+(c.altaction?c.altaction+"/":"");return delete d.controller,delete d.view,i.then(function(){d.view=alt.routeFolder+"/"+m+"view."+(""!=alt.theme?alt.theme+".":"")+"html"+(""!=alt.urlArgs?"?"+alt.urlArgs:""),require([alt.routeFolder+"/"+m+"controller"],function(e){"undefined"==typeof t[m]&&(t[m]=e[e.length-1],e[e.length-1]=function(){for(var l,o=this,r=arguments,a=0;a<e.length;a++)if("$scope"==e[a]){l=arguments[a];break}var n=l.$on("$includeContentLoaded",function(e){t[m].apply(o,r),n()})}),d.controller=e,d.$apply(function(){u.resolve()})},function(t){u.reject(t)})},function(t){u.reject(t)}),u.promise}]}}},l.when("/",""!=alt.defaultRoute?{redirectTo:alt.defaultRoute}:alt.routing()),l.when("/:altaction",alt.routing()),l.when("/:altcontroller/:altaction",alt.routing()),l.when("/:altmodule/:altcontroller/:altaction",alt.routing()),l.otherwise({resolve:{redirectCheck:["$location",function(t){-1===t.absUrl().indexOf(alt.baseUrl)&&t.path("/")}]}})}]),alt.module("alt-route",alt.modules.route);